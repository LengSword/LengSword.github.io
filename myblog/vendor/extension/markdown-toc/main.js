function encode_id_with_array(e,t){for(var r=0,n=0;n<t.length;n++)r+=factor(e,t.length-n,t[n]);return r}function get_parent_id_with_array(e,t){for(var r=[],n=0;n<t.length;n++)r.push(t[n]);r.pop();for(var o=0,n=0;n<r.length;n++)o+=factor(e,r.length-n,r[n]);return o}function factor(opts,count,current){if(1==count)return current;for(var str="",i=count-1;i>0;i--)str+=current*opts.step+"*";return eval(str+"1")}!function(e){function t(t){e(t.documment_selector).find(":header").each(function(){var r=parseInt(this.nodeName.substring(1),10),n=e.trim(e(this).text());i(t,this,r),a(t,e(this),r,n)})}function r(e){return e.render_before(e),n(e)}function n(e){var t=e._header_nodes,r="";for(var n in t){var o=t[n];r+=e.compile_headers_with_item(o)}return e.render_after(e,r),r}function i(t,r,n){if(t._headers.length==n)t._headers[n-1]++;else if(t._headers.length>n)t._headers=t._headers.slice(0,n),t._headers[n-1]++;else if(t._headers.length<n)for(var o=0;o<n-t._headers.length;o++)t._headers.push(1);1==t.is_auto_number&&(e(r).text().indexOf(t._headers.join("."))!=-1||e(r).text(t._headers.join(".")+". "+e(r).text()))}function _(e){var t=e.html(),r=t.split("."),n=r.pop().trim();return n}function a(t,r,n,o){var i=encode_id_with_array(t,t._headers),a=get_parent_id_with_array(t,t._headers),s=i;1==t.use_head_anchor&&(s=_(r)),e(r).attr("id",s),d(e(r).text()),t._header_offsets.push(e(r).offset().top-t.highlight_offset),d("h offset ="+(e(r).offset().top-t.highlight_offset)),t._header_nodes.push({id:i,level:n,pId:a,orderd_title:e(r).text()||"null",origin_title:o,open:!0,url:"#"+s,target:"_self"})}function s(e){var t=e.middlewares;for(o in t)t[o](e)}function h(t){t.highlight_offset=e(t.documment_selector).offset().top}function d(t){1==e.fn.markdown_toc.defaults.debug&&console.log(t)}e.fn.markdown_toc=function(n){var o=e.extend({},e.fn.markdown_toc.defaults,n);return this.each(function(){o._zTree=e(this),h(o),s(o),t(o),r(o)})},e.fn.markdown_toc.defaults={_zTree:null,_headers:[],_header_offsets:[],_header_nodes:[{id:1,pId:0,orderd_title:"Table of Content",open:!0}],debug:!1,use_head_anchor:!1,scroll_selector:"window",highlight_offset:0,highlight_on_scroll:!0,refresh_scroll_time:50,documment_selector:"body",render_before:function(e){},render_after:function(t,r){e(t._zTree).html("<ul>"+r+"</ul>")},middlewares:[function(e){console.log("aaaaaa")},function(e){console.log("bbbbbb")}],compile_headers_with_item:function(e){return" <h"+e.level+"><a href='#"+e.id+"'>"+e.orderd_title+"</a></h"+e.level+">"},is_posion_top:!0,is_auto_number:!1,is_expand_all:!0,is_highlight_selected_line:!0,step:100},e(window).on("loaded-main-page",function(){e("#tree").markdown_toc({is_auto_number:!0})})}(Zepto);